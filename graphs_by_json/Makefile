DATE := $(shell date +'%Y%m%d')

all: $(DATE)-orgas.svg $(DATE)-policies.svg

# All .dot files are generated by gen_%.sh file (gen_orgas.sh for example)
%.dot: gen_%.sh
	bash "$<" "$@"

$(DATE)-%.svg: %.dot
	dot -Tsvg "$<" -o "$@"

clean:
	rm -f *.svg *.dot

# Keep temporary files (dot files) for debug
.PRECIOUS: %.dot
